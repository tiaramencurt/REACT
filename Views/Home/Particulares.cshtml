@{
    ViewData["Title"] = "Particulares";
}

<h2>Modo Particular</h2>

<p>Presion√° el bot√≥n para enviar tu ubicaci√≥n actual y verificar si hay un servicio de emergencia cerca.</p>

<button type="button" onclick="pedirUbicacion()">Enviar ubicaci√≥n</button>

<form id="formUbicacion" action="/Home/CompararUbicacion" method="post">
    <input type="hidden" id="Latitud" name="Latitud">
    <input type="hidden" id="Longitud" name="Longitud">
</form>
@{
    string color = TempData["Color"] as string;
    var distancia = TempData["Distancia"];
}

@if (!string.IsNullOrEmpty(color))
{
    <h3>Veh√≠culo de emergencia cercano</h3>
    <p>Distancia m√≠nima: @distancia metros.</p>

    @if (color == "red")
    {
        <p>‚ö†Ô∏è Est√°s muy cerca de un servicio de emergencia. Despej√° el paso.</p>
    }
    else if (color == "yellow")
    {
        <p>üöß Un veh√≠culo de emergencia se aproxima. Manten√© precauci√≥n.</p>
    }
    else
    {
        <p>‚úÖ No hay servicios de emergencia cerca por ahora.</p>
    }

    <p>Color: @color</p>
}

<script>
function pedirUbicacion() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
            function (position) {
                document.getElementById("Latitud").value = position.coords.latitude;
                document.getElementById("Longitud").value = position.coords.longitude;
                document.getElementById("formUbicacion").submit();
            },
            function (error) {
                alert("No se pudo obtener la ubicaci√≥n o fue denegada.");
            }
        );
    } else {
        alert("Tu navegador no soporta geolocalizaci√≥n.");
    }
}
</script>